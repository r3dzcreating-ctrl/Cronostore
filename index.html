<!DOCTYPE html>
<html lang="en" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Cronos Store</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
  :root{
    --accent:#7d00e0;
    --accent-2:#9a33ff;
    --bg:#0a0a0a;
    --card:#1a1a1a;
    --text:#fff;
    --muted:#bfbfbf;
  }
  body.light {
    --bg:#f6f6f8; --card:#fff; --text:#111; --muted:#666;
    --accent:#7d00e0;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:Inter,Arial,Helvetica,sans-serif;
    background:var(--bg); color:var(--text);
    min-height:100vh; display:flex; flex-direction:column; overflow-x:hidden;
    transition:background .25s, color .25s;
  }

  /* == Canvas background circles == */
  #bgCanvas{ position:fixed; inset:0; z-index:-1; }

  header{
    padding:18px 16px; text-align:center; font-weight:700; font-size:22px;
    display:flex; align-items:center; justify-content:center; gap:12px;
  }
  .topbar{
    display:flex; gap:12px; align-items:center; justify-content:center; padding:8px 12px;
    flex-wrap:wrap;
  }
  .tools{ display:flex; gap:10px; align-items:center; }
  .search {
    display:flex; align-items:center; gap:8px;
    background:var(--card); padding:6px; border-radius:8px;
    border:1px solid rgba(255,255,255,0.03);
  }
  .search input{ background:transparent; border:none; outline:none; color:var(--text); padding:6px; width:240px; }
  .btn {
    background:var(--accent); color:white; padding:8px 12px; border-radius:8px; border:none; cursor:pointer;
    font-weight:600;
  }
  .small-btn{ padding:6px 10px; font-size:14px; }

  /* featured slider */
  .featured { width:100%; max-width:1200px; margin:10px auto; position:relative; overflow:hidden; border-radius:12px; }
  .slides { display:flex; transition:transform .5s ease; }
  .slide{ min-width:100%; height:220px; display:flex; align-items:center; justify-content:center; color:#fff; font-size:20px; background:linear-gradient(90deg, rgba(125,0,224,0.8), rgba(154,51,255,0.7)); }
  .slide img{ max-height:200px; object-fit:contain; }

  /* products grid */
  .container{ width:100%; max-width:1200px; margin:14px auto; padding:0 12px; flex:1; }
  .products{ display:grid; grid-template-columns:repeat(4,1fr); gap:16px; }
  @media(max-width:1024px){ .products{ grid-template-columns:repeat(2,1fr); } .slide{height:180px} }
  @media(max-width:600px){ .products{ grid-template-columns:repeat(1,1fr); } .slide{height:140px} .search input{width:140px} }

  .card{
    background:var(--card); border-radius:10px; overflow:hidden; border:1px solid rgba(255,255,255,0.03);
    box-shadow:0 6px 18px rgba(0,0,0,0.35); display:flex; flex-direction:column; transition:transform .18s;
  }
  .card:hover{ transform:translateY(-6px); border-color:rgba(125,0,224,0.45) }
  .card img{ width:100%; height:150px; object-fit:cover; display:block; }
  .card-body{ padding:10px; flex:1; display:flex; flex-direction:column; gap:8px; }
  .card-body h4{ margin:0; font-size:15px; }
  .price{ font-weight:700; color:var(--muted) }
  .stars{ color:gold; font-size:14px }

  /* cart icon */
  .cart-icon{ position:fixed; top:18px; right:18px; z-index:1200; cursor:pointer; font-size:26px; display:flex; align-items:center; gap:8px; }
  .cart-count{ background:#ff3b30; color:#fff; font-size:12px; padding:2px 6px; border-radius:20px; font-weight:700; }

  /* cart sidebar */
  .cart-sidebar{
    position:fixed; top:0; right:-380px; width:360px; height:100%; background:rgba(10,10,10,0.96);
    z-index:1100; padding:16px; transition:right .35s ease; display:flex; flex-direction:column; gap:8px;
  }
  body.light .cart-sidebar{ background:#fff; color:#000; }
  .cart-sidebar.active{ right:0; }
  .cart-header{ display:flex; justify-content:space-between; align-items:center; }
  .cart-items{ flex:1; overflow:auto; margin-top:6px; display:flex; flex-direction:column; gap:8px; padding-right:6px; }
  .cart-item{ display:flex; gap:8px; align-items:center; background:rgba(255,255,255,0.02); padding:8px; border-radius:8px; }
  body.light .cart-item{ background:rgba(0,0,0,0.03); }
  .cart-item img{ width:48px; height:48px; object-fit:cover; border-radius:6px; }
  .cart-item .meta{ flex:1; font-size:13px; }
  .cart-item .meta b{ display:block; }
  .cart-item .remove{ background:transparent; border:none; color:#ff3b30; font-size:16px; cursor:pointer; }

  .coupon-row{ display:flex; gap:8px; align-items:center; margin-top:6px; }
  .coupon-row input{ flex:1; padding:8px; border-radius:8px; border:1px solid rgba(255,255,255,0.06); background:transparent; color:var(--text); }
  .coupon-row button{ padding:8px 10px; border-radius:8px; border:none; cursor:pointer; background:var(--accent); color:#fff; }

  .checkout-row{ display:flex; gap:8px; align-items:center; justify-content:space-between; margin-top:6px; }
  .total{ font-weight:800; font-size:18px; }

  /* toast */
  .toast-wrap{ position:fixed; top:20px; left:50%; transform:translateX(-50%); z-index:2000; pointer-events:none; }
  .toast{ background:rgba(0,0,0,0.8); color:#fff; padding:10px 14px; border-radius:10px; margin-top:8px; display:flex; gap:8px; align-items:center; pointer-events:auto; }

  /* footer */
  footer{ padding:18px 12px; text-align:center; background:transparent; color:var(--muted) }

  /* fly-to-cart image */
  .flying-img{ position:fixed; width:60px; height:60px; object-fit:cover; z-index:2000; pointer-events:none; border-radius:8px; transition:transform .6s cubic-bezier(.2,.8,.2,1); }

  /* small utilities */
  .right-links a{ color:var(--text); margin-left:12px; font-size:20px; text-decoration:none; }
  .currency-select{ padding:6px 8px; border-radius:8px; border:1px solid rgba(255,255,255,0.06); background:transparent; color:var(--text) }

</style>
</head>
<body>

<canvas id="bgCanvas"></canvas>

<header>
  <div style="display:flex;align-items:center;gap:12px;">
    <img src="" id="logoImg" alt="" style="width:36px;height:36px;border-radius:8px;display:none">
    <span>Cronos Store</span>
  </div>
</header>

<div class="topbar">
  <div class="tools">
    <div class="search" role="search">
      <i class="fa fa-search"></i>
      <input id="searchBox" placeholder="ابحث عن منتج..." />
    </div>

    <select id="currency" class="currency-select" title="اختر العملة">
      <option value="SAR">ر.س (SAR)</option>
      <option value="USD">USD</option>
      <option value="EUR">EUR</option>
    </select>

    <button class="small-btn" onclick="toggleTheme()">🌙</button>
  </div>

  <div style="margin-left:auto; display:flex; align-items:center; gap:12px;">
    <div class="right-links" style="display:flex;align-items:center;">
      <a href="https://discord.gg/cc4" target="_blank" title="Discord"><i class="fab fa-discord"></i></a>
      <a href="https://www.youtube.com/@Cronostore" target="_blank" title="YouTube"><i class="fab fa-youtube"></i></a>
    </div>
  </div>
</div>

<!-- Featured slider -->
<div class="featured">
  <div class="slides" id="slides">
    <div class="slide"><img src="https://cdn.discordapp.com/attachments/1414253621163593738/1417144304626962452/ChatGPT_Image_Sep_15_2025_04_45_19_PM.png?ex=68c969fb&is=68c8187b&hm=89a61dc8ec0096fc40e645477a5a0c3001733c3d646a5aebb277a22087ebb414&" alt="banner1"></div>
    <div class="slide"><img src="https://cdn.discordapp.com/attachments/1414253621163593738/1417144304626962452/ChatGPT_Image_Sep_15_2025_04_45_19_PM.png?ex=68c969fb&is=68c8187b&hm=89a61dc8ec0096fc40e645477a5a0c3001733c3d646a5aebb277a22087ebb414&" alt="banner2"></div>
  </div>
</div>

<!-- Main container -->
<div class="container">
  <div class="products" id="products"></div>
</div>

<!-- Cart icon -->
<div class="cart-icon" id="cartIcon" onclick="toggleCart()">
  <i class="fa fa-shopping-cart"></i>
  <div class="cart-count" id="cartCount">0</div>
</div>

<!-- Cart sidebar -->
<div class="cart-sidebar" id="cartSidebar" aria-hidden="true">
  <div class="cart-header">
    <h3>سلة المشتريات</h3>
    <button onclick="toggleCart()" style="background:transparent;border:none;font-size:18px;cursor:pointer">✖</button>
  </div>

  <div class="coupon-row" style="margin-top:6px;">
    <input id="couponInput" placeholder="ادخل الكوبون هنا">
    <button onclick="applyCoupon()">تطبيق</button>
  </div>

  <div class="checkout-row">
    <div class="total">المجموع: <span id="totalAmount">0</span></div>
    <button class="btn" onclick="checkout()">الدفع</button>
  </div>

  <div class="cart-items" id="cartItems"></div>

  <div style="font-size:13px;color:var(--muted);margin-top:8px">
    أكواد صالحة: <b>CronosWeb</b> (15%)، <b>Cronos10</b> (10%)، <b>Cronos20</b> (20%)
  </div>
</div>

<!-- toast wrapper -->
<div class="toast-wrap" id="toastWrap" aria-live="polite"></div>

<footer>
  © Cronos Store — جميع الحقوق محفوظة
</footer>

<script>
/* ========================
   بيانات المنتجات (منك)
   ======================== */
const PRODUCTS = [
  {id:1,name:"Tweak | تويك",price:94,img:"https://cdn.discordapp.com/icons/1406600823039070229/8ce1cdf2191ca08c9897e44edbc504dd.png?size=1024",rating:4.8},
  {id:2,name:"Windows | ويندوز مخفف",price:131,img:"https://cdn.discordapp.com/icons/1406600823039070229/8ce1cdf2191ca08c9897e44edbc504dd.png?size=1024",rating:4.6},
  {id:3,name:"Macro | ماكرو",price:74,img:"https://cdn.discordapp.com/icons/1406600823039070229/8ce1cdf2191ca08c9897e44edbc504dd.png?size=1024",rating:4.2},
  {id:4,name:"Fortnite Script | سكربت فورتنايت",price:74,img:"https://cdn.discordapp.com/icons/1406600823039070229/8ce1cdf2191ca08c9897e44edbc504dd.png?size=1024",rating:4.1},
  {id:5,name:"Blackops6 Script | بلاك اوبس سكربت",price:74,img:"https://cdn.discordapp.com/icons/1406600823039070229/8ce1cdf2191ca08c9897e44edbc504dd.png?size=1024",rating:3.9},
  {id:6,name:"Modernwarefire3 script | سكربت مودرن وير فاير 3",price:74,img:"https://cdn.discordapp.com/icons/1406600823039070229/8ce1cdf2191ca08c9897e44edbc504dd.png?size=1024",rating:4.0},
  {id:7,name:"Overwatch Script | سكربت اوفر واتش",price:74,img:"https://cdn.discordapp.com/icons/1406600823039070229/8ce1cdf2191ca08c9897e44edbc504dd.png?size=1024",rating:4.3},
  {id:8,name:"Perm Spoofer (soon)",price:140,img:"https://cdn.discordapp.com/icons/1406600823039070229/8ce1cdf2191ca08c9897e44edbc504dd.png?size=1024",rating:5}
];

/* ==== عملات (قابل للتعديل) ====
   القيم هي سعر 1 SAR بالمقابل:
   USD = 0.266 تقريباً
   EUR = 0.245 تقريباً
   يمكنك تعديل هذه القيم حسب رغبتك لاحقاً.
*/
const RATES = { SAR:1, USD:0.266, EUR:0.245 };

/* === كوبونات === */
const COUPONS = {
  'CronosWeb':0.15,
  'Cronos10':0.10,
  'Cronos20':0.20
};

/* ===== state and DOM refs ===== */
const productsEl = document.getElementById('products');
const cartItemsEl = document.getElementById('cartItems');
const cartCountEl = document.getElementById('cartCount');
const totalAmountEl = document.getElementById('totalAmount');
const cartSidebar = document.getElementById('cartSidebar');
const toastWrap = document.getElementById('toastWrap');
const searchBox = document.getElementById('searchBox');
const currencySelect = document.getElementById('currency');

let cart = []; // array of {id, qty}
let discount = 0;
let activeCurrency = localStorage.getItem('currency') || 'SAR';

/* load saved settings */
(function initFromStorage(){
  try{
    const saved = JSON.parse(localStorage.getItem('cronos_cart')||'null');
    if(saved && Array.isArray(saved)) cart = saved;
    const savedTheme = localStorage.getItem('cronos_theme');
    if(savedTheme === 'light') document.body.classList.add('light');
    const savedCur = localStorage.getItem('currency'); if(savedCur) { activeCurrency=savedCur; currencySelect.value=savedCur; }
  }catch(e){ console.warn(e) }
})();

/* ===== render products ===== */
function formatPrice(amount, currency){
  const rate = RATES[currency] || 1;
  const converted = (amount * rate);
  if(currency === 'SAR') return `${Math.round(converted)} ر.س`;
  if(currency === 'USD') return `$${converted.toFixed(2)}`;
  if(currency === 'EUR') return `€${converted.toFixed(2)}`;
  return `${converted.toFixed(2)} ${currency}`;
}

function starHtml(r){
  const full = Math.floor(r);
  const half = (r - full) >= 0.5;
  let out = '';
  for(let i=0;i<full;i++) out += '★';
  if(half) out += '★';
  for(let i=(full + (half?1:0)); i<5;i++) out += '☆';
  return `<span class="stars">${out} <small style="color:var(--muted);font-weight:600"> ${r}</small></span>`;
}

function renderProducts(list=PRODUCTS){
  productsEl.innerHTML = '';
  list.forEach(p=>{
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <img src="${p.img}" alt="${p.name}">
      <div class="card-body">
        <h4>${p.name}</h4>
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>${starHtml(p.rating)}</div>
          <div class="price">${formatPrice(p.price, activeCurrency)}</div>
        </div>
        <div style="margin-top:8px; display:flex; gap:8px;">
          <button class="btn" onclick="addToCartAnimated(${p.id}, this)">أضف للسلة</button>
          <button class="small-btn" onclick="openProductModal(${p.id})">المزيد</button>
        </div>
      </div>`;
    productsEl.appendChild(card);
  });
}
renderProducts();

/* ===== search (live) ===== */
searchBox.addEventListener('input',()=>{
  const q = searchBox.value.trim().toLowerCase();
  const filtered = PRODUCTS.filter(p=>p.name.toLowerCase().includes(q));
  renderProducts(filtered);
});

/* ===== currency change ===== */
currencySelect.value = activeCurrency;
currencySelect.addEventListener('change', e=>{
  activeCurrency = e.target.value;
  localStorage.setItem('currency', activeCurrency);
  renderProducts();
  renderCart();
});

/* ===== cart logic + localStorage ===== */
function persistCart(){ localStorage.setItem('cronos_cart', JSON.stringify(cart)); }

function addToCart(id){
  const existing = cart.find(c=>c.id===id);
  if(existing) existing.qty++;
  else cart.push({id, qty:1});
  persistCart(); renderCart();
  showToast('تمت إضافة المنتج للسلة');
}

function removeFromCartIndex(index){
  if(index>=0 && index < cart.length) cart.splice(index,1);
  persistCart(); renderCart();
}

function calculateTotal(){
  let sum = 0;
  cart.forEach(ci=>{
    const p = PRODUCTS.find(x=>x.id===ci.id);
    if(p) sum += p.price * ci.qty;
  });
  sum = sum * (1 - discount);
  return sum;
}

function renderCart(){
  cartItemsEl.innerHTML = '';
  let totalSAR = 0;
  cart.forEach((ci, idx)=>{
    const p = PRODUCTS.find(x=>x.id===ci.id);
    if(!p) return;
    const item = document.createElement('div');
    item.className = 'cart-item';
    item.innerHTML = `
      <img src="${p.img}" alt="${p.name}">
      <div class="meta"><b>${p.name}</b><span style="color:var(--muted);">${p.price} ر.س × ${ci.qty}</span></div>
      <div style="display:flex;flex-direction:column;align-items:center;gap:6px">
        <div style="display:flex;gap:6px">
          <button class="small-btn" onclick="changeQty(${idx},-1)">-</button>
          <button class="small-btn" onclick="changeQty(${idx},1)">+</button>
        </div>
        <button class="remove" title="إزالة" onclick="removeFromCartIndex(${idx})">✖</button>
      </div>
    `;
    cartItemsEl.appendChild(item);
    totalSAR += p.price * ci.qty;
  });

  const totalAfter = Math.round(calculateTotal());
  totalAmountEl.textContent = formatPrice(totalAfter, activeCurrency);
  cartCountEl.textContent = cart.reduce((s,i)=>s+i.qty,0);
  persistCart();
}

function changeQty(idx, delta){
  if(!cart[idx]) return;
  cart[idx].qty += delta;
  if(cart[idx].qty <= 0) cart.splice(idx,1);
  renderCart();
  showToast('تم تحديث الكمية');
}

/* ===== coupons ===== */
function applyCoupon(){
  const code = document.getElementById('couponInput').value.trim();
  if(!code){ discount = 0; showToast('أدخل كود كوبون'); renderCart(); return; }
  const val = COUPONS[code];
  if(val){ discount = val; showToast(`تم تطبيق كوبون: ${(val*100)}%`); renderCart(); }
  else { discount = 0; showToast('الكوبون غير صالح'); renderCart(); }
}

/* ===== checkout open page (simple summary) ===== */
function checkout(){
  if(cart.length === 0){ showToast('السلة فارغة'); return; }
  // generate simple order page in new tab
  const order = {
    items: cart.map(ci => {
      const p = PRODUCTS.find(x=>x.id===ci.id);
      return { name: p.name, qty: ci.qty, unit: formatPrice(p.price, activeCurrency) };
    }),
    total: formatPrice(Math.round(calculateTotal()), activeCurrency)
  };
  const w = window.open('', '_blank');
  const html = `
    <html><head><meta charset="utf-8"><title>Checkout — Cronos Store</title></head>
    <body style="font-family:Arial;direction:rtl;text-align:right;padding:20px">
      <h2>ملخص الطلب</h2>
      <ul>
        ${order.items.map(it=>`<li><b>${it.name}</b> — ${it.qty} × ${it.unit}</li>`).join('')}
      </ul>
      <h3>المجموع: ${order.total}</h3>
      <p>هذا مثال صفحة الدفع. يمكنك ربطها ببوابة دفع لاحقاً.</p>
      <button onclick="window.close()">إغلاق</button>
    </body></html>
  `;
  w.document.write(html);
  // clear cart after checkout for demo (comment out if not desired)
  cart = []; discount = 0; persistCart(); renderCart();
  showToast('فتح صفحة الدفع');
}

/* ===== toast notifications (stack) ===== */
function showToast(text, timeout=2200){
  const t = document.createElement('div');
  t.className = 'toast';
  t.innerHTML = `<div style="font-weight:700;margin-left:6px">⚡</div><div>${text}</div>`;
  toastWrap.appendChild(t);
  setTimeout(()=>{ t.style.opacity = '0'; t.style.transform='translateY(-8px)'; setTimeout(()=>t.remove(),400); }, timeout);
}

/* ===== fly to cart animation ===== */
function addToCartAnimated(productId, btnEl){
  // create flying clone from the product image
  const card = btnEl.closest('.card');
  const img = card.querySelector('img');
  const rect = img.getBoundingClientRect();
  const fly = img.cloneNode();
  fly.className = 'flying-img';
  document.body.appendChild(fly);
  fly.style.left = rect.left + 'px';
  fly.style.top = rect.top + 'px';
  fly.style.width = rect.width + 'px';
  fly.style.height = rect.height + 'px';

  const cartIcon = document.getElementById('cartIcon');
  const targetRect = cartIcon.getBoundingClientRect();

  // force reflow for transition
  requestAnimationFrame(()=>{
    fly.style.transform = `translate(${targetRect.left - rect.left}px, ${targetRect.top - rect.top}px) scale(0.2)`;
    fly.style.opacity = '0.6';
  });
  // remove after animation
  setTimeout(()=>{ fly.remove(); addToCart(productId); }, 600);
}

/* ===== toggle cart sidebar ===== */
function toggleCart(){
  cartSidebar.classList.toggle('active');
  const cartIcon = document.getElementById('cartIcon');
  if(cartSidebar.classList.contains('active')){
    cartIcon.style.display = 'none'; // أخفي الأيقونة عند فتح السلة
  } else {
    cartIcon.style.display = 'flex'; // أرجع الأيقونة عند الإغلاق
  }
}


/* ===== product modal (simple) ===== */
function openProductModal(id){
  const p = PRODUCTS.find(x=>x.id===id);
  if(!p) return;
  const w = window.open('', '_blank', 'width=560,height=480');
  const html = `
  <html dir="rtl"><head><meta charset="utf-8"><title>تفاصيل المنتج</title></head>
  <body style="font-family:Arial;padding:18px;direction:rtl">
    <h2>${p.name}</h2>
    <img src="${p.img}" style="max-width:100%;height:auto;border-radius:8px" />
    <p>السعر: ${p.price} ر.س</p>
    <p>التقييم: ${p.rating} / 5</p>
    <p>وصف المنتج: هذه خدمة برمجية احترافية مقدمة من Cronos Store.</p>
    <button onclick="window.close()">إغلاق</button>
  </body></html>`;
  w.document.write(html);
}

/* ===== theme toggle ===== */
function toggleTheme(){
  document.body.classList.toggle('light');
  localStorage.setItem('cronos_theme', document.body.classList.contains('light') ? 'light' : 'dark');
}

/* ===== featured slider auto === */
let slideIndex = 0;
function showNextSlide(){
  const slides = document.getElementById('slides');
  slideIndex = (slideIndex + 1) % slides.children.length;
  slides.style.transform = `translateX(-${slideIndex * 100}%)`;
}
setInterval(showNextSlide, 3500);

/* ===== canvas animated circles as background ===== */
const canvas = document.getElementById('bgCanvas');
const ctx = canvas.getContext('2d');
let particles = [];
function resize(){ canvas.width = innerWidth; canvas.height = innerHeight; }
window.addEventListener('resize', resize); resize();
for(let i=0;i<60;i++){
  particles.push({
    x: Math.random()*canvas.width,
    y: Math.random()*canvas.height,
    r: 10+Math.random()*60,
    vx: (Math.random()-0.5)*0.2,
    vy: -0.2 - Math.random()*0.4,
    alpha: 0.05 + Math.random()*0.2
  });
}
function drawBg(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach(p=>{
    ctx.beginPath();
    ctx.fillStyle = `rgba(125,0,224,${p.alpha})`;
    ctx.ellipse(p.x, p.y, p.r, p.r, 0, 0, Math.PI*2);
    ctx.fill();
    p.x += p.vx; p.y += p.vy;
    if(p.y + p.r < 0){ p.y = canvas.height + p.r; p.x = Math.random()*canvas.width; }
    if(p.x < -p.r) p.x = canvas.width + p.r;
    if(p.x > canvas.width + p.r) p.x = -p.r;
  });
  requestAnimationFrame(drawBg);
}
drawBg();

/* === initial render cart from storage === */
renderCart();

/* little helper: add more products 1,2,4,5,7,8 already in list; you previously asked to add some—we included product 8 placeholder */
</script>
</body>
</html>
